!function(e){if("undefined"==typeof wcmp_vendor_list_script_data)return!1;if(wcmp_vendor_list_script_data.mapbox_emable){mapboxgl.accessToken=wcmp_vendor_list_script_data.mapbox_emable;var t=wcmp_vendor_list_script_data.stores,o=new mapboxgl.Map({container:"wcmp-vendor-list-map",style:"mapbox://styles/mapbox/satellite-v9",center:[0,0],zoom:1});t.forEach(function(e){var t=document.createElement("div");t.className="marker",t.style.backgroundImage="url("+wcmp_vendor_list_script_data.map_data.marker_icon+")",t.style.width="38px",t.style.height="50px",t.style.cursor="pointer";var a=[e.location.lat,e.location.lng];new mapboxgl.Marker(t).setLngLat(a).setPopup(new mapboxgl.Popup({offset:25}).setHTML(e.info_html)).addTo(o)});var a=new MapboxGeocoder({accessToken:mapboxgl.accessToken,marker:{color:"red"},mapboxgl:mapboxgl});a=new MapboxGeocoder({accessToken:mapboxgl.accessToken,mapboxgl:mapboxgl});document.getElementById("locationText").appendChild(a.onAdd(o)),o.on("load",function(){a.on("result",function(t){e("#wcmp_vlist_center_lat").val(t.result.center[0]),e("#wcmp_vlist_center_lng").val(t.result.center[1])})}),o.addControl(new mapboxgl.FullscreenControl),o.addControl(new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}));var n=document.getElementById("menu").getElementsByTagName("input");function l(e){var t=e.target.id;o.setStyle("mapbox://styles/mapbox/"+t)}for(var c=0;c<n.length;c++)n[c].onclick=l}else{var s,r,i=[];google.maps.event.addDomListener(window,"load",function(){var t=wcmp_vendor_list_script_data.map_data.map_options;if("1"==wcmp_vendor_list_script_data.map_data.map_style){wcmp_vendor_list_script_data.map_data.map_options.mapTypeControlOptions.mapTypeIds.push("wcmp_map_style");var o=wcmp_vendor_list_script_data.map_data.map_style_data,a=new google.maps.StyledMapType(o,{name:wcmp_vendor_list_script_data.map_data.map_style_title})}var n=new google.maps.Map(document.getElementById("wcmp-vendor-list-map"),t);function l(e,t,o,a){if(-1==a)alert(wcmp_vendor_list_script_data.lang.geolocation_doesnt_support);else switch(a.code){case a.PERMISSION_DENIED:alert(wcmp_vendor_list_script_data.lang.geolocation_permission_denied);break;case a.POSITION_UNAVAILABLE:alert(wcmp_vendor_list_script_data.lang.geolocation_position_unavailable);break;case a.TIMEOUT:alert(wcmp_vendor_list_script_data.lang.geolocation_timeout);break;case a.UNKNOWN_ERROR:alert(wcmp_vendor_list_script_data.lang.geolocation_service_failed)}t.setPosition(o),t.setContent(e?wcmp_vendor_list_script_data.lang.geolocation_service_failed:wcmp_vendor_list_script_data.lang.geolocation_doesnt_support),t.open(n)}if("1"==wcmp_vendor_list_script_data.map_data.map_style&&(n.mapTypes.set("wcmp_map_style",a),n.setMapTypeId("wcmp_map_style")),s=new google.maps.InfoWindow,r=new google.maps.LatLngBounds,navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var o={lat:t.coords.latitude,lng:t.coords.longitude};e("#wcmp_vlist_center_lat").val(t.coords.latitude),e("#wcmp_vlist_center_lng").val(t.coords.longitude),n.setCenter(o),n.fitBounds(r)},function(e){l(!0,s,n.getCenter(),e)}):l(!1,s,n.getCenter(),-1),wcmp_vendor_list_script_data.stores.forEach(function(e){!function(e){r.extend(new google.maps.LatLng(e.location.lat,e.location.lng));var t=new google.maps.Marker({map:n,icon:wcmp_vendor_list_script_data.map_data.marker_icon,position:new google.maps.LatLng(e.location.lat,e.location.lng),title:e.store_name});google.maps.event.addListener(t,"click",function(){s.setContent(e.info_html),s.open(n,t)}),i.push(t)}(e)}),wcmp_vendor_list_script_data.autocomplete){var c=document.getElementById("locationText"),p=new google.maps.places.Autocomplete(c);p.addListener("place_changed",function(){var t=p.getPlace();t.geometry?(t.geometry.viewport?n.fitBounds(t.geometry.viewport):(n.setCenter(t.geometry.location),n.setZoom(17)),e("#wcmp_vlist_center_lat").val(t.geometry.location.lat()),e("#wcmp_vlist_center_lng").val(t.geometry.location.lng())):window.alert("Autocomplete returned place contains no geometry")})}else e("#locationText").on("input",function(){var t=e(this).val();(new google.maps.Geocoder).geocode({address:t},function(t,o){if(o==google.maps.GeocoderStatus.OK){var a=t[0].geometry.location;n.setCenter(a),e("#wcmp_vlist_center_lat").val(a.lat()),e("#wcmp_vlist_center_lng").val(a.lng())}})})})}}(jQuery);